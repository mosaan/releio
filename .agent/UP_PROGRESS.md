# 反復 2 の作業状況

- 現在のフェーズ: 方向づけ（反復2開始）
- 現在のワークフロー: 要件
  - 前ワークフロー: 設計/テストの文書化（反復1で完了）
  - 現在の作業: 不足成果物の補完（UC-02/03/05/06/07の分析・設計資料を追加し、棚卸し結果を反映）。

## 反復 1 までのサマリ

反復1（方向づけ）で要求/分析/設計/テストの骨子を整備し、統一プロセス上のベースラインを確立した。要求成果物（特色リスト、ユースケース/ドメイン/補足要求）、分析成果物（分析モデル、主要UC実現、4+1ビュー骨格）、設計成果物（設計モデル/配置モデル/ADログ骨子）を作成し、テスト戦略（現行Vitest資産と課題）を整理して反復をクローズした。

## 反復 2 における主要な目標

1. 統一プロセスの全「作業」を再確認し、不足する成果物やその内容を確認する。
2. **Mastra完全移行の推進**（`docs_v2/ExecPlan_Mastra_FullMigration.md`）
   - UC1（基本チャット）MVP完了
   - UC2（MCPツール実行）+ ツール実行許可システム（HITL）の実装

## 成果物の目標（反復2）

- Backendテスト基盤の改修（ロガー遅延初期化、DB接続DI）と`proxy/cert/fetch`テストのグリーン化
- AD-007/AD-008/AD-009の設計確定に向けた設計モデル・ADログの更新（再接続/圧縮設定化/MCP上限）
- Renderer UIテストの追加（SessionList/ChatPanel/ストリーミング表示のハッピー/エラー経路）
- 分析モデル/ユースケース実現の拡充（重要ユースケースの例外パス追加）
- テスト計画と自動化枠組みの更新（カバレッジ収集と暫定CIゲート設定）

---

## 変更履歴

| 日付       | 内容                                                                                                                                        |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| 2025-11-25 | 初版作成：反復1開始、要求ワークフローの目標を記載                                                                                           |
| 2025-11-25 | 要求ワークフローの完了を記録、分析ワークフローへ移行。分析ワークフローの作業内容と成果物を明記。反復2（推敲フェーズ）の目標を詳細化         |
| 2025-11-25 | 分析モデル、UC-01/UC-04実現、アーキテクチャ記述の初版を追加。成果物リンクを更新し、READMEに反映                                             |
| 2025-11-25 | 成果物ファイルの命名規則を「ワークフロー区分\_成果物名」に統一し、要求/分析プレフィックスへリネーム                                         |
| 2025-11-25 | 設計ワークフローの文書化方針を更新し、設計モデル/配置モデル/アーキテクチャ決定ログの骨子を追加。`Proposed`論点（再接続/圧縮/MCP並列）を整理 |
| 2025-11-25 | `docs_UP/README.md`の進捗セクションを設計ワークフローに揃え、残作業と`Proposed`論点の整理方針を反映                                         |
| 2025-11-25 | テスト戦略ドキュメントを追加し、反復1の締めとしてテストワークフローの現状と次反復の改善方針を整理                                           |
| 2025-11-25 | 反復2を開始。サマリを「反復1まで」に更新し、主要目標と成果物目標を推敲フェーズ向けに優先順で再設定                                          |
| 2025-11-26 | 統一プロセス全作業の棚卸しを実施し、ワークフロー別の不足成果物・強化ポイントを`docs_UP/README.md`に追記                                     |
| 2025-11-26 | 不足していた主要ユースケース（UC-02/03/05/06/07）の分析・設計成果物を追加し、READMEに反映                                                   |
| 2025-11-26 | ユースケース実現を単一ドキュメントに統合し、ユースケース設計ドキュメントの命名を簡素化                                                      |
