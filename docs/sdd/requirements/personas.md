# ペルソナ定義

本ドキュメントでは、Releio の主要ユーザー層をペルソナとして定義し、各ペルソナの目的・課題・期待する体験を記述する。

- **対象読者**: プロダクトマネージャー、UI/UX デザイナー、開発チーム
- **目的**: ユーザーストーリー・受入基準の作成基盤、UI/UX 設計の指針
- **関連**: `requirements/user-stories.md`, `requirements/use-cases.md`

---

## ペルソナ 1: **開発者（Developer）**

### 基本属性

- **名前**: 田中 健太（仮名）
- **年齢**: 28 歳
- **職業**: フルスタックエンジニア（スタートアップ勤務）
- **技術スタック**: TypeScript, React, Node.js, Python
- **AI 利用経験**: ChatGPT Web版、GitHub Copilot を日常的に使用
- **デスクトップ環境**: Windows 11 / macOS, VSCode, 複数モニター

### 目的・動機

1. **コード生成・デバッグの高速化**
   - 既存プロジェクトのコードベースを参照しながら、AI にリファクタリングや新機能実装を相談したい。
   - エラーメッセージをコピペして即座に解決策を得たい。

2. **ツール統合による作業効率化**
   - ファイルシステム操作（ファイル検索・内容確認）、Git 操作、API テストツールを AI から直接実行したい。
   - Web版 AI チャットでは不可能な「ローカル環境との連携」を重視。

3. **会話履歴のローカル管理**
   - プライバシー重視。クラウド同期不要で、全データをローカル DB に保存したい。
   - 過去の会話を全文検索し、再利用可能な形で記録。

### 課題・不満

- **ChatGPT Web 版の制約**
  - ブラウザタブが増えて管理が煩雑。
  - ローカルファイルにアクセスできない。
  - ネットワーク遮断時は使用不可。

- **MCP サーバー設定の複雑さ**
  - CLI ツールの JSON 設定が難しい。GUI で簡単に MCP サーバーを追加・管理したい。

- **長時間会話でのコンテキスト喪失**
  - トークン制限で古い会話が切り捨てられ、文脈が失われる。自動要約があれば理想的。

### 期待する体験

1. **シームレスなツール実行**
   - 「`src/components` 以下のファイル一覧を取得して」と入力 → MCP ツールが自動実行 → 結果が即座に表示。
   - 承認ダイアログは最小限（信頼できるツールは自動承認ルール設定可能）。

2. **高速な応答と安定性**
   - ストリーミング応答で待機時間を短縮。
   - Electron アプリとしてネイティブ動作し、ブラウザより軽快。

3. **柔軟な AI プロバイダー選択**
   - OpenAI, Anthropic, Google を切り替え可能。自前の API キーで無制限使用。
   - Azure OpenAI 対応（企業ユースケース想定）。

### 主要ユースケース

- UC-001: AI チャット（コード生成・質問応答）
- UC-002: MCP ツール呼び出し（ファイル操作・Git・Web検索）
- UC-003: 会話圧縮（長時間セッションの継続）

---

## ペルソナ 2: **エンタープライズユーザー（Enterprise User）**

### 基本属性

- **名前**: 佐藤 由美（仮名）
- **年齢**: 35 歳
- **職業**: 大手企業の IT 部門マネージャー
- **技術スタック**: Java, SQL, 社内ツール群
- **AI 利用経験**: 社内 ChatGPT ライセンスあり（制限付き）
- **デスクトップ環境**: Windows 10, 企業プロキシ経由、社内証明書必須

### 目的・動機

1. **企業ネットワーク環境での AI 利用**
   - 社内プロキシ・証明書を経由して外部 AI API にアクセスしたい。
   - Web版では証明書エラーが頻発し、利用困難。

2. **データガバナンス・監査対応**
   - 全会話ログをローカル保存し、監査時に提出可能な形式で管理。
   - クラウド同期なしでセキュリティポリシーに準拠。

3. **ツール実行の承認フロー**
   - AI が勝手に外部 API を呼び出すのは NG。
   - Human-in-the-Loop（HITL）承認機能で、ツール実行前に必ず確認したい。

### 課題・不満

- **プロキシ・証明書設定の困難さ**
  - 多くの AI ツールが企業ネットワーク非対応。
  - システム管理者に依頼しても解決せず、個人アカウントで迂回する羽目に。

- **セキュリティ要件との衝突**
  - ChatGPT Teams 版でもデータが外部サーバーに保存されるため、機密情報は入力不可。
  - ローカル完結型の AI ツールが必要だが、選択肢が少ない。

- **ツール実行リスク**
  - MCP ツールが意図しない操作（ファイル削除・API課金）を引き起こす懸念。

### 期待する体験

1. **簡単なプロキシ・証明書設定**
   - GUI で HTTP/HTTPS プロキシ URL、認証情報、カスタム証明書パスを入力。
   - 「システム設定を検出」ボタンで自動設定。
   - 接続テスト機能で設定の正しさを事前確認。

2. **HITL 承認ダイアログ**
   - AI がツールを実行しようとした際、ポップアップで内容を表示。
   - 「承認」「拒否」「今後このツールは自動承認」の選択肢。
   - 拒否時は AI に「ユーザーが拒否しました」と通知され、別案を提示。

3. **監査ログのエクスポート**
   - 全会話・ツール実行履歴を CSV / JSON でエクスポート可能。
   - 特定期間の会話を検索・フィルタリング。

### 主要ユースケース

- UC-004: プロキシ・証明書設定（ネットワーク対応）
- UC-005: HITL ツール承認フロー
- UC-006: 会話履歴の検索・エクスポート

---

## ペルソナ 3: **パワーユーザー（Power User）**

### 基本属性

- **名前**: 山田 太郎（仮名）
- **年齢**: 42 歳
- **職業**: フリーランスコンサルタント（AI / データサイエンス）
- **技術スタック**: Python, R, TensorFlow, LangChain
- **AI 利用経験**: 複数 LLM を API 経由で使い分け、カスタムプロンプト作成
- **デスクトップ環境**: macOS, 複数 AI ツール常駐（Raycast, Alfred）

### 目的・動機

1. **複数 AI プロバイダーの使い分け**
   - タスクに応じて最適な AI を選択（コード: Claude, 一般質問: GPT-4, 翻訳: Gemini）。
   - 同一アプリ内で切り替え可能な UI。

2. **カスタム MCP サーバー開発**
   - 自作の MCP サーバー（社内 API ラッパー、専用データベース検索）を接続。
   - 標準プロトコル（MCP）準拠で容易に統合したい。

3. **トークン使用量の最適化**
   - 長時間会話での課金を抑えるため、圧縮設定を細かく調整。
   - トークン使用量の可視化とリアルタイム監視。

### 課題・不満

- **ツール間の分断**
  - ChatGPT Desktop, Claude Desktop, Gemini Web をタブ切り替えで使い分け → 非効率。
  - 会話履歴が分散し、統合管理できない。

- **カスタマイズ性の欠如**
  - 既存 AI アプリはプロバイダー固定、MCP サーバー設定が CLI のみ。
  - GUI での柔軟な設定変更が不可。

- **トークン制限の可視化不足**
  - コンテキスト限界に達してから気づく → 会話が突然リセット。
  - 事前警告と自動圧縮があれば理想的。

### 期待する体験

1. **プロバイダー切り替え UI**
   - 設定画面で複数 AI プロバイダーを登録（API キー、Base URL、モデル一覧）。
   - チャット画面でドロップダウンから即座に切り替え。

2. **MCP サーバー管理 UI**
   - GUI で新規 MCP サーバー追加（名前、コマンド、環境変数、引数）。
   - 接続状態のリアルタイム表示（stderr ログ確認可能）。
   - ツール一覧・リソース一覧を UI で確認。

3. **トークン監視ダッシュボード**
   - 現在のトークン使用量をプログレスバーで表示。
   - 閾値超過時に「圧縮しますか？」通知。
   - 圧縮設定（閾値 %, 保持メッセージ数）をスライダーで調整。

### 主要ユースケース

- UC-007: 複数 AI プロバイダー管理
- UC-008: MCP サーバー登録・監視
- UC-009: トークン使用量監視・圧縮設定

---

## ペルソナ 4: **ライトユーザー（Casual User）**

### 基本属性

- **名前**: 鈴木 花子（仮名）
- **年齢**: 24 歳
- **職業**: マーケター（非エンジニア）
- **技術スタック**: Google Workspace, Notion, 基本的な Excel
- **AI 利用経験**: ChatGPT Web 版を時々使用（文章添削・アイデア出し）
- **デスクトップ環境**: Windows 11, ブラウザ多用

### 目的・動機

1. **シンプルな AI チャット**
   - 難しい設定なしで、即座に AI と会話開始。
   - Web版と同じ感覚で使えるデスクトップアプリ。

2. **オフライン動作（将来期待）**
   - 出張先のカフェで Wi-Fi が不安定でも、ローカル LLM（Ollama）で利用したい。

3. **プライバシー重視**
   - 個人的なメモや日記を AI に添削してもらいたいが、クラウド送信は不安。
   - ローカル保存なら安心。

### 課題・不満

- **Web版の UI 不満**
  - ブラウザタブが埋もれて見失う。
  - ログイン切れ・セッションタイムアウト。

- **設定項目の多さ**
  - 既存の AI ツールは設定が複雑で挫折。
  - デフォルトで使える状態が理想。

### 期待する体験

1. **初回起動時のガイド**
   - 「API キーを入力してください」ウィザード形式で誘導。
   - OpenAI / Anthropic / Google から選択 → API キー入力 → 即座に利用開始。

2. **シンプルな UI**
   - チャット画面が最前面。設定は「歯車アイコン」に隠す。
   - 専門用語（MCP, トークン, プロキシ）は極力排除し、平易な説明。

3. **エラーハンドリング**
   - API キー間違い → 「API キーが無効です。設定画面で確認してください」明確な指示。
   - ネットワークエラー → 「接続に失敗しました。プロキシ設定を確認しますか？」

### 主要ユースケース

- UC-001: AI チャット（基本的な質問応答）
- UC-010: 初回セットアップウィザード

---

## ペルソナ間の優先度

| ペルソナ                 | 優先度   | 理由                                                    |
| ------------------------ | -------- | ------------------------------------------------------- |
| 開発者                   | **最高** | コアターゲット。MCP統合・ツール実行が主要価値提案       |
| パワーユーザー           | **高**   | 拡張性・カスタマイズ性の検証。フィードバック源          |
| エンタープライズユーザー | **中**   | 将来の収益化（企業版）を見据えた機能                    |
| ライトユーザー           | **中**   | UX 改善の指針。広範な採用には必須だが、MVP では優先度下 |

---

## ペルソナ活用指針

1. **ユーザーストーリー作成時**
   - 各ストーリーに「As a [Persona]」を明記し、誰のための機能かを明確化。
   - 例: 「As a Developer, I want to execute MCP tools without manual approval for trusted tools...」

2. **UI/UX 設計時**
   - 開発者向け: 高度な設定を隠さず、詳細ログ表示。
   - ライトユーザー向け: デフォルト値を最適化し、設定項目を最小限に。

3. **受入基準定義時**
   - ペルソナごとの成功シナリオを記述。
   - 例: エンタープライズユーザーは「プロキシ設定 → 接続テスト → 成功」まで完遂できること。

4. **優先順位付け時**
   - 開発者・パワーユーザー向け機能を MVP に含める。
   - ライトユーザー向け機能（ウィザード等）は Phase 2 以降。

---

## 次のステップ

本ペルソナ定義を基に、以下を作成する:

- `requirements/user-stories.md`: ペルソナごとのユーザーストーリー
- `requirements/use-cases.md`: ペルソナのニーズを満たすユースケース一覧
- `requirements/acceptance-criteria.md`: ペルソナ視点での受入基準
