# 統一プロセス成果物ディレクトリ

本ディレクトリは、「UMLによる統一ソフトウェア開発プロセス」に基づいて整理された成果物を格納しています。

---

## 命名規則

成果物ファイルは、ワークフロー区分をプレフィックスとして付与します。
- 形式: `<ワークフロー区分>_<成果物名>.md`
- 想定プレフィックス: `要求_`, `分析_`, `設計_`, `実装_`, `テスト_`
- 例: `要求_ユースケースモデル.md`, `分析_ユースケース実現_UC-01_UC-04.md`

---

## ディレクトリ構成

```
docs_UP/
├── README.md                      # 本ファイル（概要説明）
├── 要求_特色リスト.md                   # 要求候補のリスト
├── 要求_ユースケースモデル.md           # アクターとユースケースのモデル
├── 要求_ドメインモデル.md               # システムの外界を表現するモデル
├── 要求_補足要求の仕様書.md            # 機能外要求などの補足的な要求
├── 分析_分析モデル.md                  # バウンダリ/コントロール/エンティティのラフ構造
├── 分析_ユースケース実現_UC-01_UC-04.md # 重要ユースケースの実現シナリオ（方向づけフェーズ）
├── 分析_ソフトウェアアーキテクチャ記述.md # 4+1ビュー骨格と主要メカニズムの予備版
├── 設計_設計モデル.md                  # サブシステム/レイヤー構成と設計メカニズムの骨子
├── 設計_配置モデル.md                  # ノード・プロセス配置と外部依存の関係（方向づけ版）
└── 設計_アーキテクチャ決定ログ.md      # 設計観点の意思決定ログ
```

---

## 成果物の説明

### 1. 特色リスト（Feature List）

**ファイル**: [要求_特色リスト.md](要求_特色リスト.md)

**責任ワーカー**: （明示的なワーカーなし、作業立案に使用）

**概要**:
プロジェクトの要求候補を列挙したリストです。既存の実装と設計文書から抽出された特色が、カテゴリごとに整理されています。各特色には、説明、優先度、実装状態、関連文書が記載されています。

**使い方**:
- 反復の作業立案時に、どの特色を次に実装するかを検討する際に参照します
- 新しい要求が発生した際に、このリストに追加します
- 優先度の見直しや、実装状態の更新を行います

---

### 2. ユースケースモデル（Use-Case Model）

**ファイル**: [要求_ユースケースモデル.md](要求_ユースケースモデル.md)

**責任ワーカー**: システム分析者、ユースケース定義者

**概要**:
システムと相互作用するアクター（エンドユーザー、AIプロバイダー、MCPサーバーなど）と、システムが提供する主要なユースケース（UC-01からUC-07）を記述しています。各ユースケースには、基本フロー、代替フロー、前提条件、事後条件が詳細に記載されています。

**使い方**:
- システムの責任範囲を理解する際に参照します
- 新しい機能を追加する際に、どのユースケースに該当するかを確認します
- 設計や実装の際に、ユースケースのフローを基に詳細化します
- テストケースを作成する際に、ユースケースのシナリオを基にします

**主要なユースケース**:
- **UC-01**: AIと会話する（アーキテクチャ上最も重要）
- **UC-02**: 会話セッションを管理する
- **UC-03**: AI設定を管理する
- **UC-04**: MCPサーバーを管理する
- **UC-05**: ネットワーク設定を管理する
- **UC-06**: アプリケーションを更新する
- **UC-07**: 会話履歴を圧縮する（システム内部）

---

### 3. ドメインモデル（Domain Model）

**ファイル**: [要求_ドメインモデル.md](要求_ドメインモデル.md)

**責任ワーカー**: ビジネスモデル作成者

**概要**:
AIチャットアプリケーションのドメインにおける主要な概念（会話セッション、メッセージ、AIプロバイダー、MCPサーバーなど）とそれらの関係を記述しています。各エンティティの属性、関連、ビジネスルールが詳細に記載されています。

**使い方**:
- システムが扱う概念とその関係を理解する際に参照します
- データベーススキーマを設計する際の基礎として使用します
- 分析・設計フェーズで、分析クラスや設計クラスを洗い出す際の出発点とします
- ドメイン用語の定義を確認する際に参照します

---

### 4. 補足要求の仕様書（Supplementary Specification）

**ファイル**: [要求_補足要求の仕様書.md](要求_補足要求の仕様書.md)

**責任ワーカー**: システム分析者

**概要**:
特定のユースケースに固有ではない、システム全体に適用される要求を記述しています。以下のカテゴリに分類されています：

1. **機能要求**: データ永続化、ログ記録、IPC
2. **ユーザビリティ要求**: レスポンス時間、フィードバック、アクセシビリティ
3. **信頼性要求**: エラー処理、データ整合性、フォールトトレランス
4. **パフォーマンス要求**: 応答時間、スループット、リソース使用量
5. **サポート性要求**: ログ記録、診断機能
6. **セキュリティ要求**: 認証情報の保護、ネットワークセキュリティ、プロセス分離
7. **実装制約**: 技術スタック、コード品質、ビルドとパッケージング
8. **インターフェイス要求**: UI、外部システムインターフェイス
9. **プラットフォーム要求**: サポートするプラットフォーム、プラットフォーム固有の制約
10. **ライセンスとオープンソース要求**
11. **法的、規制、標準要求**

**使い方**:
- システムの品質属性や制約を理解する際に参照します
- 設計や実装の際に、これらの要求を満たすように考慮します
- テスト計画を立案する際に、これらの要求を検証するテストケースを作成します

---

### 5. 分析モデル（Analysis Model）

**ファイル**: [分析_分析モデル.md](分析_分析モデル.md)

**責任ワーカー**: システム分析者、アーキテクト

**概要**:
方向づけフェーズで作成した荒削りな分析モデルです。Renderer/Backendの主要なバウンダリ・コントロール・エンティティを整理し、アーキテクチャ説明のためのパッケージビューを示しています。

**使い方**:
- アーキテクチャ候補を説明・議論する際の共通参照に使います
- ユースケース実現や設計モデルへのブリッジとして、責務分担を検証する際に参照します
- 後続反復での詳細化（クラス間の制約・例外フロー）に向けたベースラインとします

---

### 6. ユースケース実現（UC-01, UC-04）

**ファイル**: [分析_ユースケース実現_UC-01_UC-04.md](分析_ユースケース実現_UC-01_UC-04.md)

**責任ワーカー**: システム分析者、ユースケース定義者

**概要**:
アーキテクチャ上重要なユースケース（AIと会話する、MCPサーバーを管理する）の実現シナリオを、バウンダリ/コントロール/エンティティのやり取りとして示したものです。方向づけフェーズ向けのラフなシーケンスを掲載しています。

**使い方**:
- AIストリーミングやMCP連携の流れを確認し、設計・実装時の基盤的な制約を把握します
- 例外フローや性能要件を追加するときのたたき台にします
- テストケース設計時に、主要なハッピーパスとエラーパスを抽出するための参照にします

---

### 7. ソフトウェアアーキテクチャ記述（Software Architecture Document）

**ファイル**: [分析_ソフトウェアアーキテクチャ記述.md](分析_ソフトウェアアーキテクチャ記述.md)

**責任ワーカー**: アーキテクト

**概要**:
4+1ビューの骨格（論理/プロセス/開発/配置 + シナリオ）を用いて、3プロセス構成やAIストリーミング、MCP統合、圧縮メカニズムなど主要な設計決定をまとめた予備版です。

**使い方**:
- 方向づけフェーズにおける実現性評価・リスク整理の土台として利用します
- 推敲フェーズ以降で詳細化する際のセクション構成と用語の足並みを揃えます
- 新規メカニズム追加時の影響範囲確認に活用します

---

### 8. 設計モデル（Design Model）

**ファイル**: [設計_設計モデル.md](設計_設計モデル.md)

**責任ワーカー**: アーキテクト、デザイナ

**概要**:
3プロセス構成に対してサブシステム/レイヤーを整理し、主要コンポーネントの責務メモと設計メカニズム（IPC、ストリーミング、圧縮、アップデート、プロキシ/証明書）の扱い方針を示した骨子です。方向づけフェーズでの共通足場となるよう最小限の内容に留めています。

**使い方**:
- 分析モデルを設計クラス/コンポーネントへ写像する際の出発点として利用します
- 推敲フェーズで例外フローや契約を詳細化する際のセクション構成を揃えます
- 実装との照合（`src/backend/handler.ts`, `ai/stream.ts`, `mcp/manager.ts` 等）により責務の漏れを確認します

---

### 9. 配置モデル（Deployment Model）

**ファイル**: [設計_配置モデル.md](設計_配置モデル.md)

**責任ワーカー**: アーキテクト、デプロイ担当

**概要**:
Main/Backend/Rendererの配置と外部依存（AI Provider/MCP Server/Update Server）への接続関係、開発・本番のパス差分を示したたたき台です。セキュリティ境界とログ/DBの配置を明確にし、今後のフォールトトレランス検討のベースにします。

**使い方**:
- パッケージングや配布形態の影響を確認する際に参照します
- ネットワーク設定（プロキシ/証明書）の適用箇所を把握し、障害調査の起点とします
- 推敲フェーズで再接続戦略や上限設定を設計する際の前提資料とします

---

### 10. アーキテクチャ決定ログ（Architecture Decision Log）

**ファイル**: [設計_アーキテクチャ決定ログ.md](設計_アーキテクチャ決定ログ.md)

**責任ワーカー**: アーキテクト

**概要**:
方向づけフェーズで暗黙に選択されていた設計判断（3プロセス分離、ストリーミング集約、MCPプロセス管理、圧縮戦略、更新方式、プロキシ/証明書方針等）を明文化し、今後の変更管理に備える決定ログです。検討中の論点も`Proposed`として列挙しています。

**使い方**:
- 新しい設計判断を追加する際にID/Status/日付を付与し、根拠を残します
- 決定がコードに反映されたら関連ファイル/モジュールを追記し、影響範囲を可視化します
- 廃止や差し替えが発生した場合、`Superseded`等に更新し代替IDを紐付けます

---

## 進捗管理

プロジェクトの進捗状況は、[.agent/UP_PROGRESS.md](../.agent/UP_PROGRESS.md) で管理されています。

**現在の状態**:
- **フェーズ**: 方向づけ
- **反復**: 反復1
- **ワークフロー**: 分析（アーキテクチャ分析、重要ユースケース実現の初版作成）
- **作業**: 分析モデル・ユースケース実現・アーキテクチャ記述の初版作成とレビュー

---

## 今後の作業

### 反復1（現在）の残りの作業:
- 設計モデル/配置モデルの詳細化（例外フロー・再接続戦略・設定パラメータ化）
- UC-01/UC-04の実現シナリオに失敗パスと圧縮メカニズムの挿入ポイントを追記
- ソフトウェアアーキテクチャ記述とアーキテクチャ決定ログを同期し、検証方針を補強
- 方向づけフェーズ完了判定のための実現性リスク洗い出し

### 反復2以降の候補:
- 分析モデルとユースケース実現の精緻化（重要ユースケース全体へ拡大）
- 推敲フェーズへの移行とアーキテクチュラルベースラインの確立
- 設計モデル/テスト計画の作成とアーキテクチャ検証の自動化

---

## 関連文書

### 統一プロセスのリファレンス
- [統一プロセス：01_構成単位と要素.md](../UP_with_UML/統一プロセス：01_構成単位と要素.md)
- [統一プロセス：02_成果物と責任ワーカー.md](../UP_with_UML/統一プロセス：02_成果物と責任ワーカー.md)
- [統一プロセス：03_ワークフローとフェーズ別活動の要点.md](../UP_with_UML/統一プロセス：03_ワークフローとフェーズ別活動の要点.md)
- [ABOUT_THIS_FOLDER.md](../UP_with_UML/ABOUT_THIS_FOLDER.md)

### 既存の設計文書
本プロジェクトには、統一プロセス導入前に作成された多数の設計文書があります：
- [docs/MCP_INTEGRATION_DESIGN.md](../MCP_INTEGRATION_DESIGN.md)
- [docs/PROXY_AND_CERTIFICATE_DESIGN.md](../PROXY_AND_CERTIFICATE_DESIGN.md)
- [docs/CHAT_SESSION_PERSISTENCE.md](../CHAT_SESSION_PERSISTENCE.md)
- [docs/AUTO_UPDATE.md](../AUTO_UPDATE.md)
- その他多数（[docs/](../) ディレクトリを参照）

これらの既存文書と本ディレクトリの成果物を照らし合わせながら、統一プロセスに基づいた整理を進めていきます。

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|---------|
| 2025-11-25 | 1.0 | 初版作成（反復1、方向づけフェーズ） |
| 2025-11-25 | 1.1 | 命名規則を追記し、ワークフロー区分プレフィックスに従ってファイル名を整理 |
