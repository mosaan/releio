# 特色リスト（Feature List）

> 要求候補のリスト。作業の立案に使われます。

本文書は、Electron AI Starter Templateプロジェクトにおける主要な特色（Feature）を列挙したものです。これらは既存の実装と設計文書から抽出された要求候補であり、今後の反復における作業の優先度づけと立案の基礎となります。

---

## 1. AI統合機能

### 1.1 マルチプロバイダーAI対応
- **説明**: OpenAI、Anthropic (Claude)、Google (Gemini)、Azureの複数のAIプロバイダーに対応
- **優先度**: 高
- **状態**: 実装済み
- **関連文書**: `docs/EXTENDING_AI_PROVIDERS.md`

### 1.1b AIプロバイダー設定V2（複数プロバイダー設定）⭐
- **説明**: 同じプロバイダータイプでも複数の設定を作成・管理（例：会社用OpenAI、個人用OpenAI）。各設定は独立したAPIキー、baseURL、モデルリストを持つ
- **優先度**: 高
- **状態**: 実装済み
- **関連文書**: `src/backend/settings/ai-settings.ts`

### 1.1c モデルのAPI経由自動リフレッシュ ⭐
- **説明**: プロバイダーAPIからモデルリストを取得して自動更新（カスタムモデルは保持）
- **優先度**: 中
- **状態**: 実装済み
- **関連文書**: `src/backend/settings/ai-settings.ts`

### 1.1d カスタムモデルの追加 ⭐
- **説明**: ユーザーが手動でカスタムモデルIDを追加。API更新の影響を受けない
- **優先度**: 中
- **状態**: 実装済み
- **関連文書**: `src/backend/settings/ai-settings.ts`

### 1.2 リアルタイムストリーミング
- **説明**: AIレスポンスのリアルタイムストリーミング表示
- **優先度**: 高
- **状態**: 実装済み

### 1.3 会話履歴の永続化
- **説明**: チャットセッションの保存と復元
- **優先度**: 高
- **状態**: 実装済み
- **関連文書**: `docs/CHAT_SESSION_PERSISTENCE.md`

### 1.4 会話履歴の圧縮
- **説明**: トークン制限対策としての会話履歴の自動圧縮
- **優先度**: 中
- **状態**: 設計済み（実装待ち）
- **関連文書**: `docs/CONVERSATION_HISTORY_COMPRESSION_DESIGN.md`

### 1.5 MCP（Model Context Protocol）統合
- **説明**: 外部ツールとの連携（マルチステップツール実行、複数MCPサーバー対応）
- **優先度**: 高
- **状態**: 実装済み
- **関連文書**: `docs/MCP_INTEGRATION_DESIGN.md`, `docs/MCPB_RUNTIME_DESIGN.md`

### 1.6 ツール実行の可視化
- **説明**: MCPツール呼び出しの詳細表示（引数、結果、実行ステータス）
- **優先度**: 中
- **状態**: 実装済み
- **関連文書**: `docs/TOOL_DISPLAY_IMPLEMENTATION.md`

### 1.7 メッセージの状態管理 ⭐
- **説明**: メッセージの状態（pending、streaming、completed、error）を管理し、UIに反映
- **優先度**: 高
- **状態**: 実装済み
- **関連文書**: `src/backend/db/schema.ts` (chatMessages.state)

### 1.8 メッセージのパート構造 ⭐
- **説明**: メッセージを原子的なパート（text、tool_invocation、tool_result、attachment、metadata）に分割して管理。将来の拡張（画像、添付ファイル）を容易にする
- **優先度**: 高
- **状態**: 実装済み
- **関連文書**: `src/backend/db/schema.ts` (messageParts)

### 1.9 ツール呼び出しのライフサイクル管理 ⭐
- **説明**: ツール実行の詳細（レイテンシ、開始時刻、完了時刻、エラー詳細）を専用テーブルで管理。パフォーマンス分析や統計に活用可能
- **優先度**: 中
- **状態**: 実装済み
- **関連文書**: `src/backend/db/schema.ts` (toolInvocations)

### 1.10 MCPサーバーのstderrキャプチャ ⭐
- **説明**: MCPサーバーの標準エラー出力をキャプチャして診断情報として表示（最新10行保持）
- **優先度**: 中
- **状態**: 実装済み
- **関連文書**: `src/backend/mcp/manager.ts` (InstrumentedStdioMCPTransport)

---

## 2. データベース機能

### 2.1 SQLite + Drizzle ORM
- **説明**: 型安全なデータベース操作とマイグレーション
- **優先度**: 高
- **状態**: 実装済み

### 2.2 環境別データベースパス
- **説明**: 開発環境と本番環境でのデータベースパスの自動切り替え
- **優先度**: 高
- **状態**: 実装済み

### 2.3 セッションのアーカイブ機能 ⭐
- **説明**: 古い会話セッションをアーカイブして整理。archivedAt属性で管理
- **優先度**: 低
- **状態**: 実装済み
- **関連文書**: `src/backend/db/schema.ts` (chatSessions.archivedAt)

### 2.4 セッションのピン留め機能 ⭐
- **説明**: 重要な会話セッションをリストの上部に固定表示。pinnedAt属性で管理
- **優先度**: 低
- **状態**: 実装済み
- **関連文書**: `src/backend/db/schema.ts` (chatSessions.pinnedAt)

### 2.5 セッションの色分け機能 ⭐
- **説明**: セッションに色を設定してUIで視覚的に区別。color属性で管理
- **優先度**: 低
- **状態**: 実装済み
- **関連文書**: `src/backend/db/schema.ts` (chatSessions.color)

### 2.6 モデル設定テーブル ⭐
- **説明**: AIモデルのメタデータ（トークン制限、圧縮閾値）をデータベースで管理。圧縮戦略の決定に使用
- **優先度**: 中
- **状態**: 実装済み（データ入力は今後）
- **関連文書**: `src/backend/db/schema.ts` (modelConfigs)

---

## 3. ネットワーク機能

### 3.1 プロキシ対応
- **説明**: エンタープライズ環境でのプロキシ設定（システム自動検出、カスタム設定、認証対応）
- **優先度**: 中
- **状態**: 実装済み（Windows完全対応、macOS/Linux計画中）
- **関連文書**: `docs/PROXY_AND_CERTIFICATE_DESIGN.md`, `docs/PROXY_CONFIGURATION.md`

### 3.2 証明書管理
- **説明**: カスタムCA証明書のサポート、システム証明書ストアとの統合
- **優先度**: 中
- **状態**: 実装済み（Windows完全対応）
- **関連文書**: `docs/PROXY_AND_CERTIFICATE_DESIGN.md`

### 3.3 接続テスト
- **説明**: プロキシと証明書設定の検証機能
- **優先度**: 低
- **状態**: 実装済み

---

## 4. 開発者機能

### 4.1 統合ログシステム
- **説明**: Main、Backend、Rendererプロセスの統一ログ管理
- **優先度**: 高
- **状態**: 実装済み

### 4.2 TypeScript型安全性
- **説明**: 全プロセスにわたる完全なTypeScript型サポート
- **優先度**: 高
- **状態**: 実装済み

### 4.3 ホットリロード開発環境
- **説明**: Viteベースの高速開発サーバー
- **優先度**: 高
- **状態**: 実装済み

### 4.4 テスト環境
- **説明**: Vitestによるバックエンドプロセステスト
- **優先度**: 中
- **状態**: 実装済み

---

## 5. UI/UX機能

### 5.1 モダンUIコンポーネント
- **説明**: Shadcn/uiコンポーネントライブラリ（New Yorkスタイル）
- **優先度**: 高
- **状態**: 実装済み

### 5.2 Tailwind CSS 4対応
- **説明**: CSS変数によるテーマサポート
- **優先度**: 高
- **状態**: 実装済み

### 5.3 ダーク/ライトテーマ
- **説明**: ダークモードとライトモードの切り替え
- **優先度**: 中
- **状態**: 実装済み

### 5.4 Assistant UIチャットインターフェイス
- **説明**: ストリーミング対応のプロダクションレディなチャットUI
- **優先度**: 高
- **状態**: 実装済み

---

## 6. アプリケーション管理機能

### 6.1 自動更新
- **説明**: electron-updaterによる自動更新（静的サーバー対応、Windows対応）
- **優先度**: 中
- **状態**: 実装済み
- **関連文書**: `docs/AUTO_UPDATE.md`

### 6.2 設定管理
- **説明**: データベースベースのアプリケーション設定管理
- **優先度**: 高
- **状態**: 実装済み

### 6.3 マルチプラットフォームビルド
- **説明**: Windows、macOS、Linuxビルド対応
- **優先度**: 高
- **状態**: 実装済み

---

## 7. アーキテクチャ機能

### 7.1 3プロセスアーキテクチャ
- **説明**: Main、Backend（Utility Process）、Rendererの分離アーキテクチャ
- **優先度**: 高
- **状態**: 実装済み

### 7.2 セキュアIPCブリッジ
- **説明**: プロセス間の安全な通信
- **優先度**: 高
- **状態**: 実装済み
- **関連文書**: `docs/IPC_COMMUNICATION_DEEP_DIVE.md`

---

## 8. 将来の特色候補

### 8.1 Mastra統合
- **説明**: エージェントワークフロー、メモリ、RAGパイプライン、評価システムの追加
- **優先度**: 低
- **状態**: 計画中
- **関連文書**: `README.md` (Future Roadmap)

### 8.2 macOS/Linuxプロキシ完全対応
- **説明**: macOSとLinuxでのシステムプロキシ/証明書の自動検出
- **優先度**: 低
- **状態**: 計画中

---

## サマリ

### 実装済み特色の総数
- **AI統合機能**: 13個（うち4個が実装レビューで追加）
- **データベース機能**: 6個（うち4個が実装レビューで追加）
- **ネットワーク機能**: 3個
- **開発者機能**: 4個
- **UI/UX機能**: 4個
- **アプリケーション管理機能**: 3個
- **アーキテクチャ機能**: 2個

**合計**: 35個の実装済み特色、2個の計画中特色

### 実装レビューで追加された特色（10個）
1. AIプロバイダー設定V2（複数プロバイダー設定）
2. モデルのAPI経由自動リフレッシュ
3. カスタムモデルの追加
4. メッセージの状態管理
5. メッセージのパート構造
6. ツール呼び出しのライフサイクル管理
7. MCPサーバーのstderrキャプチャ
8. セッションのアーカイブ機能
9. セッションのピン留め機能
10. セッションの色分け機能
11. モデル設定テーブル（ボーナス）

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|---------|
| 2025-11-25 | 1.0 | 初版作成（反復1、方向づけフェーズ） |
| 2025-11-25 | 1.1 | 実装レビューに基づく更新：11個の実装済み特色を追加（AI設定V2、メッセージ管理、セッション管理、ツールライフサイクル管理など）（反復1、方向づけフェーズ） |
